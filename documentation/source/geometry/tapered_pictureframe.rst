Tapered TF coils
================

This document refers to the ``TaperedPictureFrame`` or ``TP`` coil type in ``tfcoils.py``.

Overview
--------
The Tapered PictureFrame coil type is similar to a regular PictureFrame shaped TF coil
with a few extra options. Most notably, the inboard leg of the coil can have a
radial thickness that tapers from a larger value near the corners, to a smaller value
around the midplane. Therefore, the inboard leg can also be called the 'tapered
centrepost' and is sometimes treated as a separate entity from the rest of the TF coil.
The aim of a tapered centerpost is to reach the lowest aspect ratio possible, while
keeping a relatively low resistive heating value (heating is reduced with the
top/bottom coil legs having larger cross-sectional areas)

Other options also include rounded corners at the outboard leg. These are generally
driven by manufacturing constraints

These coils are also designed with Bucking Cylinders, flush with the inboard face of the
coil. The bucking cylinders aim to reduce the radial displacement generated by the
electromagnetic centering forces, therefore reducing the hoop forces in the coil.

.. figure:: ../images/geometry/tapered_pictureframe_parameterisation.JPG


Coordinates
-----------

BLUEPRINT global coordinates
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Global x, y, z coordinates are used as in the rest of the code base.

The z-height of the straight portion of the straight portion of the tapered region is
referred to as z1, while the radial position of it's centreline is called x1.

Above z1, the radial width of the centrepost linearly increases until a z-height z2,
after which the radial thickness is constant. The z-height of the (centreline) top leg
is z3 (-z3 for the bottom leg). The radial co-ordinate corresponding to z2 is called
x2, and the radial position of the outboard leg is called x3.



Build Order
-----------

To build a Tapered Pictureframe TF coil, a 'Last Closed Flux Surface' (LCFS) and 'Keep-Out Zone' (KOZ) must be specified as with
other coil shapes. Following this, a skeleton :py: Loop as shown in the figure above is
constructed. The relevant thicknesses and depths for the Winding Pack and Bucking
Cylinder are applied and :py: Loops are generated for the Winding Pack and Bucking
Cylinder in the x-z and x-y planes
